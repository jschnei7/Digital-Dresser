<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitCheck | Institutional Clarity Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #6B705C;
            --sand: #D4A373;
            --cream: #FDFCF8;
            --bg: #F4F1EA;
            --text: #333333;
            --danger: #E63946;
            --success: #2A9D8F;
            --mono: 'Space Mono', monospace;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: grid;
            grid-template-columns: 380px 1fr 400px;
            height: 100vh;
            overflow: hidden;
        }

        /* --- LEFT SIDEBAR: CONFIGURATION --- */
        nav {
            background: white;
            padding: 40px;
            border-right: 1px solid #eee;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            box-shadow: 10px 0 30px rgba(0,0,0,0.02);
        }

        .brand-header { font-size: 2.2rem; font-weight: 700; color: var(--sage); margin-bottom: 5px; }
        .version { font-family: var(--mono); font-size: 0.65rem; color: #999; margin-bottom: 30px; }

        .section-label { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; color: var(--sage); letter-spacing: 2px; margin-bottom: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px; }

        .control-group { margin-bottom: 25px; }
        label { display: block; font-size: 0.75rem; font-weight: 600; color: #666; margin-bottom: 8px; }
        
        input, select {
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            border: 1px solid #E0E0E0;
            background: #fafafa;
            font-family: inherit;
            box-sizing: border-box;
            transition: 0.3s;
        }
        input:focus { border-color: var(--sand); background: white; outline: none; }

        .btn-execute {
            background: var(--sage);
            color: white;
            border: none;
            padding: 22px;
            border-radius: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }
        .btn-execute:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(107, 112, 92, 0.2); }

        /* --- CENTER: THE VIRTUAL MIRROR --- */
        main {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at center, #ffffff 0%, #F4F1EA 100%);
        }

        .mirror-housing {
            position: relative;
            height: 85vh;
            width: 48vh;
            background: white;
            border-radius: 240px 240px 60px 60px;
            border: 15px solid white;
            box-shadow: 0 60px 120px rgba(0,0,0,0.08);
            overflow: hidden;
            display: flex;
            justify-content: center;
        }

        #digital-twin { height: 100%; object-fit: cover; transition: 1.2s cubic-bezier(0.4, 0, 0.2, 1); }

        .scan-pulse {
            position: absolute; width: 100%; height: 4px; background: var(--sand);
            top: 0; left: 0; z-index: 50; display: none;
            box-shadow: 0 0 30px var(--sand);
            animation: scanLoop 3s infinite ease-in-out;
        }
        @keyframes scanLoop { 0% { top: 0%; } 50% { top: 100%; } 100% { top: 0%; } }

        /* Biometric Nodes (Sarah & Sydney) */
        .landmark {
            position: absolute; width: 10px; height: 10px; background: var(--sand);
            border-radius: 50%; display: none; z-index: 60;
            box-shadow: 0 0 20px var(--sand);
            animation: nodePulse 1.5s infinite;
        }
        @keyframes nodePulse { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }

        /* --- RIGHT SIDEBAR: CLARITY LOGIC --- */
        .clarity-panel {
            background: white;
            padding: 40px;
            border-left: 1px solid #eee;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .bestie-box {
            background: #F9F9F7;
            border-radius: 24px 24px 24px 4px;
            padding: 25px;
            font-size: 0.95rem;
            line-height: 1.6;
            border: 1px solid #f1f1ee;
            margin-bottom: 30px;
            color: #444;
        }

        .metric-card { background: var(--cream); border-radius: 24px; padding: 25px; margin-bottom: 25px; border: 1px solid #f0f0f0; }
        .metric-value { font-size: 3.5rem; font-weight: 700; color: var(--sage); text-align: center; }

        /* Review Mirror (Noah & Sydney) */
        .review-mirror { margin-top: 20px; }
        .review-window {
            width: 100%; height: 180px; border-radius: 20px;
            background: #eee; overflow: hidden; position: relative;
            border: 1px dashed #ccc; display: flex; align-items: center; justify-content: center;
        }
        .review-img { width: 100%; height: 100%; object-fit: cover; display: none; }
        .review-caption { font-size: 0.7rem; color: #999; text-transform: uppercase; text-align: center; margin-top: 10px; font-family: var(--mono); }

        .friction-alert { color: var(--danger); font-size: 0.8rem; font-weight: 700; background: #FFF5F5; padding: 12px; border-radius: 10px; display: none; margin-top: 15px; }

    </style>
</head>
<body>

    <nav>
        <div class="brand-header">FitCheck</div>
        <div class="version">NEURAL CLARITY ENGINE // v5.2</div>
        
        <div class="control-group">
            <div class="section-label">01 / User Identity</div>
            <label>Current Profile: Jacob Schneiderman</label>
            <div style="display:flex; gap:10px;">
                <div style="flex:1;"><label>WAIST</label><input type="text" value="30 in" disabled></div>
                <div style="flex:1;"><label>CHEST</label><input type="text" value="38 in" disabled></div>
            </div>
        </div>

        <div class="control-group">
            <div class="section-label">02 / The Item</div>
            <label>BRAND LISTING</label>
            <select id="brand-input">
                <option value="levis">Levi's (94% Fit Accuracy)</option>
                <option value="zara">Zara (Vanity Sizing / Slim Cut)</option>
                <option value="asos">ASOS (Extreme Batch Variance)</option>
            </select>
            
            <label style="margin-top:15px">FABRIC BLEND</label>
            <select id="fabric-input">
                <option value="cotton">100% Raw Cotton (Durable)</option>
                <option value="poly">Polyester Blend (High Catfish Risk)</option>
                <option value="linen">Natural Linen (High Crease)</option>
            </select>
        </div>

        <div class="control-group">
            <div class="section-label">03 / Financials (Isaiah)</div>
            <div style="display:flex; gap:10px;">
                <div style="flex:1;"><label>ITEM PRICE ($)</label><input type="number" id="price-input" value="115"></div>
                <div style="flex:1;"><label>BALANCE ($)</label><input type="number" id="bank-input" value="340"></div>
            </div>
        </div>

        <div class="control-group">
            <div class="section-label">04 / Logistics (Ben)</div>
            <select id="logistics-input">
                <option value="low">Printer Ready (Low Friction)</option>
                <option value="high">No Printer (High Return Barrier)</option>
            </select>
        </div>

        <button class="btn-execute" onclick="triggerFitCheck()">Process Neural Try-On</button>
    </nav>

    <main>
        <div class="mirror-housing">
            <div id="scanner" class="scan-pulse"></div>
            
            <div class="landmark" style="top:55%; left:48%;"></div> <div class="landmark" style="top:38%; left:36%;"></div> <div class="landmark" style="top:38%; left:60%;"></div> <img id="digital-twin" src="https://i.ibb.co/LhY0m2P/Jacob-Model.jpg" alt="Jacob Digital Twin" onerror="this.src='https://images.unsplash.com/photo-1519085185758-18975f74031f?q=80&w=600'">
        </div>
    </main>

    <aside class="clarity-panel">
        <div class="bestie-box" id="stylist-chat">
            Hey Jacob! I'm ready to map your biometrics to the brand sizing charts. Let's see if this is a safe buy.
        </div>

        <div class="metric-card">
            <div class="section-label">Fit Confidence (Sarah)</div>
            <div class="metric-value" id="res-score">--%</div>
            <div id="friction-warning" class="friction-alert">⚠️ BEN'S WARNING: High return risk + Physical barrier detected.</div>
        </div>

        <div class="metric-card">
            <div class="section-label">Material Weave (Noah)</div>
            <p id="res-material" style="font-size:0.9rem; color:#666;">Awaiting scan...</p>
        </div>

        <div class="review-mirror">
            <div class="section-label">Review Mirror (Sync: 30" Waist)</div>
            <div class="review-window">
                <span id="review-text" style="color:#bbb; font-size:0.8rem;">Analyzing customer photos...</span>
                <img id="review-photo" class="review-img" src="">
            </div>
            <div class="review-caption" id="review-user">Actual Draping vs. Studio Lighting</div>
        </div>

        <div class="metric-card" style="margin-top:30px;">
            <div class="section-label">Isaiah's Pending Risk</div>
            <p id="res-money" style="font-size:0.9rem; color:#666; line-height:1.5;">--</p>
        </div>
    </aside>

    <script>
        const clarityDB = {
            levis: { fit: 96, wait: 7, user: "Sydney_UO", note: "Levi's is remarkably consistent for your frame. Sizing clarity: OPTIMAL.", img: "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=400" },
            zara: { fit: 71, wait: 14, user: "Alex_UO", note: "Zara uses 'Slim-European' cuts. Based on your 30\" waist, expect tension at the hip landmarks.", img: "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?q=80&w=400" },
            asos: { fit: 54, wait: 12, user: "Sam_UO", note: "Critical variance detected in this batch. Sarah's gamble logic is at 70% probability.", img: "https://images.unsplash.com/photo-1591195853828-11db59a44f6b?q=80&w=400" }
        };

        function triggerFitCheck() {
            const scanner = document.getElementById('scanner');
            const twin = document.getElementById('digital-twin');
            const nodes = document.querySelectorAll('.landmark');
            const chat = document.getElementById('stylist-chat');
            
            // Visual Sequence
            scanner.style.display = 'block';
            twin.style.filter = "grayscale(100%) brightness(0.6) blur(2px)";
            nodes.forEach(n => n.style.display = 'none');
            document.getElementById('review-photo').style.display = 'none';
            document.getElementById('review-text').style.display = 'block';

            chat.innerText = "Mapping body landmarks and calculating fabric drape physics...";

            setTimeout(() => {
                const brand = clarityDB[document.getElementById('brand-input').value];
                const fabric = document.getElementById('fabric-input').value;
                const price = document.getElementById('price-input').value;
                const bank = document.getElementById('bank-input').value;
                const logistics = document.getElementById('logistics-input').value;

                // Stop Sequence
                scanner.style.display = 'none';
                twin.style.filter = "none";
                twin.style.transform = "scale(1.04)";
                if(brand.fit < 85) nodes.forEach(n => n.style.display = 'block');

                // Populate Analytics
                document.getElementById('res-score').innerText = brand.fit + "%";
                chat.innerText = brand.note;
                
                // Noah's Logic
                const resMat = document.getElementById('res-material');
                if(fabric === 'poly') {
                    resMat.innerText = "⚠️ CATFISH RISK: Synthetic blend. In-person material will be shinier and thinner than studio photos.";
                    resMat.style.color = "var(--danger)";
                } else {
                    resMat.innerText = "Natural fiber density matches studio profile. Drape and feel are confirmed high-quality.";
                    resMat.style.color = "var(--success)";
                }

                // Isaiah's Logic
                const impact = Math.round((price / bank) * 100);
                document.getElementById('res-money').innerText = `Impact: ${impact}% of funds. If you return this, $${price} stays 'in the ether' for ${brand.wait} days.`;

                // The Review Mirror
                document.getElementById('review-text').style.display = 'none';
                const photo = document.getElementById('review-photo');
                photo.src = brand.img;
                photo.style.display = 'block';
                document.getElementById('review-user').innerText = `User '${brand.user}' (30" Waist): "Actual item vs. Studio"`;

                // Ben's Warning
                if(brand.fit < 75 && logistics === 'high') {
                    document.getElementById('friction-warning').style.display = 'block';
                } else {
                    document.getElementById('friction-warning').style.display = 'none';
                }

            }, 3000);
        }
    </script>
</body>
</html>